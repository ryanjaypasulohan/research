let scrollY=window.pageYOffset||document.documentElement.scrollTop,velocity=0,isScrolling=!1;const friction=.88,multiplier=.25,minVelocity=.5;let rafId;const requestAnimFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,cancelAnimFrame=window.cancelAnimationFrame||window.mozCancelAnimationFrame;function updateScroll(){const maxScroll=document.documentElement.scrollHeight-window.innerHeight;scrollY=Math.max(0,Math.min(scrollY,maxScroll)),window.scrollTo(0,scrollY),velocity*=.88,Math.abs(velocity)>.5?(scrollY+=velocity,rafId=requestAnimFrame(updateScroll)):(isScrolling=!1,velocity=0)}function handleWheel(event){event.cancelable&&event.preventDefault(),velocity+=.25*event.deltaY,isScrolling||(isScrolling=!0,rafId&&cancelAnimFrame(rafId),rafId=requestAnimFrame(updateScroll))}window.addEventListener("wheel",handleWheel,{passive:!1}),window.addEventListener("touchmove",handleWheel,{passive:!1}),window.addEventListener("scroll",()=>{isScrolling||(scrollY=window.pageYOffset||document.documentElement.scrollTop)}),document.addEventListener("DOMContentLoaded",()=>{gsap.registerPlugin(ScrollTrigger);const sprite=document.getElementById("sprite"),container=document.getElementById("sprite-container"),frameWidth=121.5,frameHeight=138.2,totalFrames=10,columns=5;let currentFrame=0,frameInterval=0,lastX=null;function updateSpriteFrame(){const col=currentFrame%5,row=Math.floor(currentFrame/5),bgX=121.5*-col,bgY=138.2*-row;sprite.style.backgroundPosition=`${bgX}px ${bgY}px`}function animateButterfly(scrollProgress){const spriteProgress=Math.floor(1e3*scrollProgress)%10;spriteProgress!==frameInterval&&(currentFrame=(currentFrame+1)%10,updateSpriteFrame(),frameInterval=spriteProgress);const x=(.4*Math.sin(scrollProgress*Math.PI*2)+scrollProgress)*(window.innerWidth-243),y=scrollProgress*(window.innerHeight-276.4);container.style.transform=null!==lastX?x>lastX?`translate(${x}px, ${y}px) scaleX(-1)`:x<lastX?`translate(${x}px, ${y}px) scaleX(1)`:`translate(${x}px, ${y}px)`:`translate(${x}px, ${y}px)`,lastX=x}container.style.transform="translate(0px, 0px)",ScrollTrigger.create({trigger:document.body,start:"top top",end:"bottom bottom",scrub:.5,onUpdate:self=>{animateButterfly(self.progress)}})}),document.addEventListener("DOMContentLoaded",()=>{const mouseContainer=document.getElementById("mouse-butterfly-container"),mouseSprite=document.getElementById("mouse-butterfly"),frameWidth=121.5,frameHeight=138.2,totalFrames=10,columns=5;let currentFrame=0,lastMouseX=null;setInterval(()=>{currentFrame=(currentFrame+1)%10;const col=currentFrame%5,row=Math.floor(currentFrame/5),bgX=121.5*-col,bgY=138.2*-row;mouseSprite.style.backgroundPosition=`${bgX}px ${bgY}px`},100);let direction=1;document.addEventListener("mousemove",e=>{const x=e.clientX-60.75,y=e.clientY-69.1;null!==lastMouseX&&(direction=x>lastMouseX?-1:1,mouseSprite.style.transform=`scaleX(${direction})`),lastMouseX=x,gsap.to(mouseContainer,{x:x,y:y,duration:.5,ease:"power2.out"})});let idleX=window.innerWidth/2,idleY=window.innerHeight/2,idleAngle=0;setInterval(()=>{if(!lastMouseX){idleAngle+=.1;const x=idleX+30*Math.cos(idleAngle),y=idleY+20*Math.sin(1.5*idleAngle);mouseContainer.style.transform=`translate(${x}px, ${y}px) scaleX(1)`}},30)}),document.addEventListener("DOMContentLoaded",()=>{gsap.registerPlugin(ScrollTrigger),document.querySelectorAll("#image-gallery-section .zoom-container").forEach(container=>{const image=container.querySelector(".zoom-image");gsap.fromTo(image,{scale:1},{scale:2.5,ease:"power2.out",scrollTrigger:{trigger:container,start:"top top",end:"+=300%",scrub:1.5,pin:!0,anticipatePin:1}})})});